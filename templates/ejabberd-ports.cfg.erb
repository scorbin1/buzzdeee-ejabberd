
%%%.   ===============
%%%'   LISTENING PORTS

%%
%% listen: The ports ejabberd will listen on, which service each is handled
%% by and what options to start it with.
%%
{listen,
 [

  {5222, ejabberd_c2s, [

			%%
			%% If TLS is compiled in and you installed a SSL
			%% certificate, specify the full path to the
			%% file and uncomment this line:
			%%
			{certfile, "<%= @servercertfile %>"}, starttls,
			{access, c2s},
			{shaper, c2s_shaper},
			{max_stanza_size, 65536}
		       ]},

  %%
  %% To enable the old SSL connection method on port 5223:
  %%
  {5223, ejabberd_c2s, [
			{access, c2s},
			{shaper, c2s_shaper},
			{certfile, "<%= @servercertfile %>"}, tls,
			{max_stanza_size, 65536}
		       ]},

  {5269, ejabberd_s2s_in, [
			   {shaper, s2s_shaper},
			   {max_stanza_size, 131072}
			  ]},

  %%
  %% ejabberd_stun: Handles STUN Binding requests
  %%
<%- if @enable_stun -%>
  {{3478, udp}, ejabberd_stun, []},
<%- end -%>

  {5280, ejabberd_http, [
			 %%{request_handlers,
			 %% [
			 %%  {["pub", "archive"], mod_http_fileserver}
			 %% ]},
			 captcha,
			 http_bind,
			 http_poll,
			 %%register,
			 web_admin
			]}

 ]}.
